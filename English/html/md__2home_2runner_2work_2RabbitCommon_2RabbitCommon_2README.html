<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" lang="en-US">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=11"/>
<meta name="generator" content="Doxygen 1.9.8"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>RabbitCommon: Qt common library</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr id="projectrow">
  <td id="projectlogo"><img alt="Logo" src="App.png"/></td>
  <td id="projectalign">
   <div id="projectname">RabbitCommon<span id="projectnumber">&#160;v2.3.4</span>
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.8 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
var searchBox = new SearchBox("searchBox", "search/",'.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:d3d9a9a6595521f9666a5e94cc830dab83b65699&amp;dn=expat.txt MIT */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */
</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<div id="MSearchResults">
<div class="SRPage">
<div id="SRIndex">
<div id="SRResults"></div>
<div class="SRStatus" id="Loading">Loading...</div>
<div class="SRStatus" id="Searching">Searching...</div>
<div class="SRStatus" id="NoMatches">No Matches</div>
</div>
</div>
</div>
</div>

</div><!-- top -->
<div><div class="header">
  <div class="headertitle"><div class="title">Qt common library</div></div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p><a class="anchor" id="autotoc_md70"></a> </p><hr  />
<p>Author：Kang <a href="#" onclick="location.href='mai'+'lto:'+'Lin'+'（k'+'l22'+'2@'+'126'+'.c'+'om'; return false;">Lin（k<span class="obfuscator">.nosp@m.</span>l222<span class="obfuscator">.nosp@m.</span>@126.<span class="obfuscator">.nosp@m.</span>com</a>)</p>
<p><a href="https://github.com/KangLin/RabbitCommon/actions/workflows/build.yml"><img src="https://github.com/KangLin/RabbitCommon/actions/workflows/build.yml/badge.svg?branch=master" alt="master status" style="pointer-events: none;" class="inline"/></a> <a href="https://github.com/KangLin/RabbitCommon/actions/workflows/build.yml"><img src="https://github.com/KangLin/RabbitCommon/actions/workflows/build.yml/badge.svg?branch=develop" alt="develop status" style="pointer-events: none;" class="inline"/></a> <a href="https://ci.appveyor.com/project/KangLin/rabbitcommon"><img src="https://ci.appveyor.com/api/projects/status/cy6jwbbysuj7t1wp?svg=true" alt="Build status" class="inline"/></a></p>
<p><a class="el" href="md__2home_2runner_2work_2RabbitCommon_2RabbitCommon_2README__zh__CN.html">:cn: Chinese</a></p>
<ul>
<li>Project home site: <a href="https://github.com/KangLin/RabbitCommon">https://github.com/KangLin/RabbitCommon</a></li>
<li>Mirror:<ul>
<li><a href="https://sourceforge.net/projects/rabbitcommon/">https://sourceforge.net/projects/rabbitcommon/</a></li>
<li><a href="https://launchpad.net/rabbitcommon">https://launchpad.net/rabbitcommon</a></li>
<li><a href="https://gitlab.com/kl222/RabbitCommon">https://gitlab.com/kl222/RabbitCommon</a></li>
<li><a href="https://invent.kde.org/kanglin/RabbitCommon">https://invent.kde.org/kanglin/RabbitCommon</a></li>
<li><a href="https://gitee.com/kl222/RabbitCommon">https://gitee.com/kl222/RabbitCommon</a></li>
<li><a href="https://bitbucket.org/kl222/rabbitcommon">https://bitbucket.org/kl222/rabbitcommon</a> </li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md72"></a>
Developer documents</h3>
<p><a href="https://kanglin.github.io/RabbitCommon/English/html/index.html">Online developer documents</a></p>
<h3><a class="anchor" id="autotoc_md73"></a>
Latest release</h3>
<ul>
<li><a href="https://github.com/KangLin/RabbitCommon/releases/latest">Latest release</a></li>
<li>See:<ul>
<li>Semantic Versioning: <a href="https://semver.org/">https://semver.org/</a></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md74"></a>
Functions</h3>
<p><a href="https://kanglin.github.io/RabbitCommon/English/html/group__API.html">API</a></p>
<p>Qt common library. include follow functions:</p>
<ul>
<li>[x] GUI<ul>
<li>[x] About<ul>
<li><a href="https://github.com/commonmark/cmark">cmark</a>: support MarkDown</li>
</ul>
</li>
<li>[x] Updater</li>
<li>[x] <a href="Src/FrmStyle/FrmStyle.h">Style (include icon theme)</a></li>
<li>[x] <a href="Src/RabbitRecentMenu.h">Recent open menu</a></li>
<li>[x] <a href="Src/TitleBar.h">Title bar</a></li>
<li>[x] <a href="Src/FolderBrowser/FolderBrowser.h">Folder browser</a></li>
</ul>
</li>
<li>[x] <a href="Src/DownloadFile.h">Download the same file from multiple URLs</a></li>
<li>[x] <a href="Src/RabbitCommonDir.h">Directory functions</a></li>
<li>[x] <a href="Src/RabbitCommonEncrypt.h">Encrypt</a></li>
<li>[x] <a href="Src/RabbitCommonRegister.h">Register</a></li>
<li>[x] Tools<ul>
<li>[x] Execute the program with administrator privileges</li>
<li>[x] The program starts automatically</li>
<li>[x] <a href="Src/RabbitCommonDir.h">Directory functions</a></li>
<li>[x] Get system information<ul>
<li>[x] Get current login user name</li>
</ul>
</li>
</ul>
</li>
<li>[x] cmake functions<ul>
<li>[x] Translations</li>
<li>[x] Add target, plugin target</li>
<li>[x] Generate pkg-config configure file</li>
<li>[x] Generate cmake configure file</li>
<li>[x] Add uninstall target</li>
</ul>
</li>
<li><p class="startli">[x] Cross-platform, support multiple operating systems</p><ul>
<li>[x] Windows</li>
<li>[x] Linux、Unix</li>
<li>[x] Android</li>
<li>[ ] Mac os</li>
<li>[ ] IOS</li>
</ul>
<p class="startli">Mac os and IOS, I don't have the corresponding equipment, please compile and test the students with the corresponding equipment.</p>
<p class="startli">See: <a href="https://doc.qt.io/qt-5/supported-platforms.html">Qt5</a>, <a href="https://doc.qt.io/qt-6/supported-platforms.html">Qt6</a></p>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md75"></a>
Compile</h3>
<ul>
<li>Create and entry build directory <pre class="fragment">  git clone --recursive https://github.com/KangLin/RabbitCommon.git
  cd RabbitCommon
  mkdir build
</pre></li>
<li>Compile<ul>
<li><p class="startli">Use cmake </p><pre class="fragment">cd build
cmake ..  -DCMAKE_BUILD_TYPE=Release
    -DQT_DIR=... \
    -DQt5_DIR=${QT_ROOT}/lib/cmake/Qt5
cmake --build .
</pre><ul>
<li>Parameter<ul>
<li>CMAKE_BUILD_TYPE: build type(MUST)</li>
<li>QT_DIR: Qt install position</li>
<li>BUILD_DOCS: build doxygen documents</li>
<li>BUILD_APP: build app</li>
<li>BUILD_ABOUT: build about</li>
<li>BUILD_UPDATE: build updater</li>
<li>BUILD_ADMINAUTHORISER: build admin authoriser</li>
</ul>
</li>
</ul>
<p class="startli"><b>NOTE</b>: If you use MSVC, you need to add -DCMAKE_BUILD_TYPE=Debug, otherwise the following error will occur when compiling Debug:</p>
<p class="startli">RabbitCommonTools.obj : error LNK2019: An external symbol that cannot be resolved "int __cdecl qInitResources_translations_RabbitCommon(void)" (?qInitResources_translations_RabbitCommon@YAHXZ)，该符号在函数 "void __cdecl g_RabbitCommon_InitResource(void)" (?g_RabbitCommon_InitResource@YAXXZ) 中被引用 RabbitCommonTools.obj : error LNK2019: An external symbol that cannot be resolved "int __cdecl qCleanupResources_translations_RabbitCommon(void)" (?qCleanupResources_translations_RabbitCommon@YAHXZ)，该符号在函数 "void __cdecl g_RabbitCommon_CleanResource(void)" (?g_RabbitCommon_CleanResource@YAXXZ) 中被引用</p><ul>
<li>linux <pre class="fragment">cd build
cmake .. -DCMAKE_INSTALL_PREFIX=`pwd`/install \
     -DCMAKE_BUILD_TYPE=Release \
     -DQT_DIR=... \
     -DQt5_DIR=${QT_ROOT}/lib/cmake/Qt5
cmake --build . --config Release --target install
</pre></li>
<li>windows <pre class="fragment">cd build
cmake .. -DCMAKE_INSTALL_PREFIX=`pwd`/install ^
       -DCMAKE_BUILD_TYPE=Release ^
       -DQT_DIR=... ^
       -DQt5_DIR=${QT_ROOT}/lib/cmake/Qt5
cmake --build . --config Release --target install
</pre></li>
<li>Android<ul>
<li>Qt6 or laster <pre class="fragment">cd build
${Qt6_DIR}/bin/qt-cmake .. -DCMAKE_BUILD_TYPE=Release
cmake --build . --config Release
</pre> Or: <pre class="fragment">cmake .. -DCMAKE_BUILD_TYPE=Release \
    -DCMAKE_INSTALL_PREFIX=`pwd`/android-build \
    -DCMAKE_TOOLCHAIN_FILE=$Qt6_DIR/lib/cmake/Qt6/qt.toolchain.cmake
cmake --build . --config Release
</pre></li>
<li>The host is linux <pre class="fragment">cd build
cmake .. -DCMAKE_BUILD_TYPE=Release \
       -DCMAKE_INSTALL_PREFIX=`pwd`/android-build \
       -DCMAKE_TOOLCHAIN_FILE=${ANDROID_NDK}/build/cmake/android.toolchain.cmake \
       -DANDROID_ABI="armeabi-v7a with NEON" \
       -DANDROID_PLATFORM=android-18 \
       -DQT_DIR=... \
       -DQt5_DIR=${QT_ROOT}/lib/cmake/Qt5
cmake --build . --config Release --target all
</pre></li>
<li>The host is windows <pre class="fragment">cd build
cmake .. -G"Unix Makefiles" ^
     -DCMAKE_BUILD_TYPE=Release ^
     -DCMAKE_INSTALL_PREFIX=`pwd`/android-build ^
     -DCMAKE_TOOLCHAIN_FILE=${ANDROID_NDK}/build/cmake/android.toolchain.cmake ^
     -DCMAKE_MAKE_PROGRAM=${ANDROID_NDK}/prebuilt/windows-x86_64/bin/make.exe ^
     -DANDROID_PLATFORM=android-18 ^
     -DANDROID_ABI=arm64-v8a ^
     -DANDROID_ARM_NEON=ON ^
     -DQT_DIR=... \
     -DQt5_DIR=${QT_ROOT}/lib/cmake/Qt5
cmake --build . --config Release --target all
</pre></li>
<li>Parameter Description: <a href="https://developer.android.google.cn/ndk/guides/cmake">https://developer.android.google.cn/ndk/guides/cmake</a><ul>
<li>ANDROID_ABI: The following values can be taken: Goal ABI. If the target ABI is not specified, CMake uses armeabi-v7a by default. Valid ABI are:<ul>
<li>armeabi：CPU with software floating point arithmetic based on ARMv5TE</li>
<li>armeabi-v7a：ARMv7-based device with hardware FPU instructions (VFP v3 D16)</li>
<li>armeabi-v7a with NEON：Same as armeabi-v7a, but with NEON floating point instructions enabled. This is equivalent to setting -DANDROID_ABI=armeabi-v7a and -DANDROID_ARM_NEON=ON.</li>
<li>arm64-v8a：ARMv8 AArch64 Instruction Set</li>
<li>x86：IA-32 Instruction Set</li>
<li>x86_64 - x86-64 Instruction Set</li>
</ul>
</li>
<li>ANDROID_NDK &lt;path&gt; The path of installed ndk in host</li>
<li>ANDROID_PLATFORM: For a full list of platform names and corresponding Android system images, see the [Android NDK Native API] (<a href="https://developer.android.google.com/ndk/guides/stable_apis.html">https://developer.android.google.com/ndk/guides/stable_apis.html</a>)</li>
<li>ANDROID_ARM_MODE</li>
<li>ANDROID_ARM_NEON</li>
<li>ANDROID_STL: Specifies the STL that CMake should use.<ul>
<li>c++_shared: The shared library variant of libc++.</li>
<li>c++_static: The static library variant of libc++.</li>
<li>none: No C++ standard library support.</li>
<li>system: The system STL</li>
</ul>
</li>
</ul>
</li>
<li>Install apk to devices <pre class="fragment"> adb install android-build-debug.apk 
</pre></li>
<li><p class="startli">Qt6 and later</p>
<p class="startli">cd build ${Qt6_DIR}/bin/qt-cmake .. -DCMAKE_BUILD_TYPE=Release cmake &ndash;build . &ndash;config Release</p>
<p class="startli">Or:</p>
<p class="startli">cmake .. -DCMAKE_BUILD_TYPE=Release \ -DCMAKE_INSTALL_PREFIX=<code>pwd</code>/android-build \ -DCMAKE_TOOLCHAIN_FILE=$Qt6_DIR/lib/cmake/Qt6/qt.toolchain.cmake cmake &ndash;build . &ndash;config Release</p>
</li>
</ul>
</li>
</ul>
</li>
<li>Use qmake. (Deprecated, please use CMake for new programs) <pre class="fragment">cd build
qmake ../RabbitCommon.pro
make install
</pre><ul>
<li>Parameter<ul>
<li>BUILD_DOCS: build doxygen documents</li>
<li>BUILD_ABOUT=OFF: Off build about</li>
<li>BUILD_UPDATE=OFF: Off build updater</li>
<li>BUILD_ADMINAUTHORISER＝OFF: Off admin authoriser</li>
</ul>
</li>
</ul>
</li>
</ul>
</li>
<li><p class="startli">Compilation notes: Use Qtcreate compile for android in windows</p><ul>
<li><p class="startli">qmake. It may appear that the dependent library could not be found. (Deprecated, please use CMake for new programs)</p>
<p class="startli">Don't find D:\Source\build-RabbitCommon-Android_for_armeabi_v7a_Clang_Qt_5_12_4_for_Android_ARMv7-Debug\bin\libRabbitCommon.so move libRabbitCommon.so ..\bin\libRabbitCommon.so process_begin: CreateProcess(NULL, move libRabbitCommon.so ..\bin\libRabbitCommon.so, ...) failed. make (e=2): The system can not find the file specified。 make[1]: [..\bin\libRabbitCommon.so] Error 2 (ignored)</p>
</li>
</ul>
<p class="startli">The reason is that the make program under windows cannot convert the \ in the path. Solution: Use a make program that recognizes the \ in the path, for example: mingw32-make.exe.</p><ul>
<li>cmake<ul>
<li>Set Generator to "Unix Makefiles"</li>
<li>Set CMAKE_MAKE_PROGRAM to ${ANDROID_NDK}/prebuilt/windows-x86_64/bin/make.exe</li>
</ul>
</li>
</ul>
</li>
<li>Install notes: <br  />
<ul>
<li>windows <br  />
 If you build app. Qt does not provide openssl dynamic library for copyright reasons, so you must copy the dynamic library of openssl to the installation directory.<ul>
<li>If it is 32, you can find the dynamic library of openssl (libeay32.dll, ssleay32.dll) in the Qt installer Tools\QtCreator\bin directory.</li>
<li>If it is 64-bit, you will need to download the binary installation package for openssl yourself.</li>
</ul>
</li>
<li><p class="startli">linux</p>
<div class="fragment"><div class="line">sudo apt-get install libssl1.1</div>
</div><!-- fragment --></li>
</ul>
</li>
</ul>
<h3><a class="anchor" id="autotoc_md76"></a>
Other application use the project</h3>
<pre class="fragment">if(NOT RabbitCommon_ROOT)
    set(RabbitCommon_ROOT $ENV{RabbitCommon_ROOT})
    if(NOT RabbitCommon_ROOT)
        set(RabbitCommon_ROOT ${CMAKE_SOURCE_DIR}/../RabbitCommon)
    endif()
endif()
if(RabbitCommon_ROOT AND EXISTS ${RabbitCommon_ROOT}/Src)
    message("Use RabbitCommon source code")
    add_subdirectory(${RabbitCommon_ROOT}/Src ${CMAKE_BINARY_DIR}/RabbitCommon)
else()
    find_package(RabbitCommon)
    if(NOT RabbitCommon_FOUND)
        message("RabbitCommon_ROOT is not found. Please use one of the following ways to set it:")
        message("1. Set RabbitCommon_ROOT to the install prefix of RabbitCommon.")
        message("2. Set RabbitCommon_ROOT to source code root of RabbitCommon.")
        message("2.1 Please download the source code of RabbitCommon from https://github.com/KangLin/RabbitCommon")
        message("   ag:")
        message("       git clone https://github.com/KangLin/RabbitCommon.git ${CMAKE_SOURCE_DIR}/..")
        message("2.2 Then set cmake variable or environment variable RabbitCommon_ROOT to download root directory.")
        message("   ag:")
        message("       cmake -DRabbitCommon_ROOT=${CMAKE_SOURCE_DIR}/.. ")
        message(FATAL_ERROR "RabbitCommon_ROOT isn't set.")
    endif()
endif()
</pre><ul>
<li>Use in library mode<ul>
<li><p class="startli">cmake</p>
<p class="startli">Set RabbitCommon_ROOT to specify the root directory of the installed <a class="el" href="namespaceRabbitCommon.html">RabbitCommon</a> </p><pre class="fragment">find_package(RabbitCommon)
</pre></li>
</ul>
</li>
<li>Use the source code directly<ul>
<li>cmake<ul>
<li>Submodule <pre class="fragment">add_subdirectory(3th_libs/RabbitCommon/Src)
</pre></li>
<li>No submodule<ul>
<li>Download <a class="el" href="namespaceRabbitCommon.html">RabbitCommon</a> to the same directory of the application <pre class="fragment">git clone https://github.com/KangLin/RabbitCommon.git
</pre></li>
<li>Introduced to add_subdirectory this directory <pre class="fragment">  if(NOT RabbitCommon_ROOT)
      set(RabbitCommon_ROOT $ENV{RabbitCommon_ROOT})
      if(NOT RabbitCommon_ROOT)
          set(RabbitCommon_ROOT ${CMAKE_SOURCE_DIR}/../RabbitCommon)
      endif()
  endif()
  if(RabbitCommon_ROOT AND EXISTS ${RabbitCommon_ROOT}/Src)
      message("Use RabbitCommon source code")
      add_subdirectory(${RabbitCommon_ROOT}/Src ${CMAKE_BINARY_DIR}/RabbitCommon)
  else()
      find_package(RabbitCommon)
      if(NOT RabbitCommon_FOUND)
          message("RabbitCommon_ROOT is not found. Please use one of the following ways to set it:")
          message("1. Set RabbitCommon_ROOT to the install prefix of RabbitCommon.")
          message("2. Set RabbitCommon_ROOT to source code root of RabbitCommon.")
          message("2.1 Please download the source code of RabbitCommon from https://github.com/KangLin/RabbitCommon")
          message("   ag:")
          message("       git clone https://github.com/KangLin/RabbitCommon.git ${CMAKE_SOURCE_DIR}/..")
          message("2.2 Then set cmake variable or environment variable RabbitCommon_ROOT to download root directory.")
          message("   ag:")
          message("       cmake -DRabbitCommon_ROOT=${CMAKE_SOURCE_DIR}/.. ")
          message(FATAL_ERROR "RabbitCommon_ROOT isn't set.")
      endif()
  endif()
</pre></li>
<li>Add the following code to the CMakeLists.txt file of the project <pre class="fragment">  target_link_libraries(${PROJECT_NAME} RabbitCommon)
</pre></li>
</ul>
</li>
<li>Static library <pre class="fragment">target_compile_definitions(${PROJECT_NAME} PRIVATE RABBITCOMMON_STATIC_DEFINE)
</pre></li>
</ul>
</li>
</ul>
</li>
<li>Initialization functions is called at the beginning of main() of the program and after QApplication <pre class="fragment">  int main(int argc, char* argv[])
  {
      QApplication a(argc, argv);
      a.setApplicationName(......);
      // Because it depend on QApplication::applicationName()
      RabbitCommon::CTools::Instance()-&gt;Init();

      ......
  }
</pre> </li>
</ul>
<h3><a class="anchor" id="autotoc_md77"></a>
Functions</h3>
<p><a href="https://kanglin.github.io/RabbitCommon/English/html/group__API.html">Online developer documents</a></p>
<h4><a class="anchor" id="autotoc_md78"></a>
&lt;a href="Src/DlgAbout/DlgAbout.h" &gt;About&lt;/a&gt;</h4>
<ul>
<li>Install Authors、 License、 ChangeLog files. <br  />
 File name naming rules: <br  />
 Authors.md、License.md、ChangeLog.md is the default file. <br  />
 The local file naming rule is to add the local name after the default file name. <br  />
 For example: Chinese file: <br  />
 Authors_zh_CN.md、License_zh_CN.md、ChangeLog_zh_CN.md <pre class="fragment">  SET(OTHER_FILES
      ${CMAKE_SOURCE_DIR}/License.md
      ${CMAKE_SOURCE_DIR}/Authors.md
      ${CMAKE_SOURCE_DIR}/Authors_zh_CN.md
      ${CMAKE_SOURCE_DIR}/ChangeLog.md
      )
  INSTALL_FILE(SOURCES ${OTHER_FILES} DESTINATION "." COMPONENT Runtime)
</pre><ul>
<li>Used in code <pre class="fragment"> QApplication a(argc, argv);
 a.setApplicationVersion(RabbitCommon_VERSION);
 a.setApplicationName("SerialPortAssistant");
 a.setApplicationDisplayName(QObject::tr("SerialPortAssistant"));

 #ifdef RABBITCOMMON
     CDlgAbout about(this);
     about.m_AppIcon = QImage(":/icon/SerialPortAssistant");
     about.m_szHomePage = "https://github.com/KangLin/SerialPortAssistant";
     #if defined (Q_OS_ANDROID)
         about.showMaximized();
         about.exec();
     #else
         about.exec();
     #endif
 #endif
</pre></li>
</ul>
</li>
<li>See: <a href="https://github.com/KangLin/SerialPortAssistant">https://github.com/KangLin/SerialPortAssistant</a></li>
</ul>
<div class="image">
<img src="about_en.png" alt=""/>
<div class="caption">
About</div></div>
    <h4><a class="anchor" id="autotoc_md79"></a>
Updater</h4>
<p>See: <a href="Src/FrmUpdater/FrmUpdater.h">FrmUpdater.h</a></p>
<div class="fragment"><div class="line">#ifdef RABBITCOMMON</div>
<div class="line">    CFrmUpdater *fu = new CFrmUpdater();</div>
<div class="line">    fu-&gt;SetTitle(QImage(&quot;:/image/SerialPortAssistant&quot;), qApp-&gt;applicationDisplayName());</div>
<div class="line">    #if defined (Q_OS_ANDROID)</div>
<div class="line">        fu-&gt;showMaximized();</div>
<div class="line">    #else</div>
<div class="line">        fu-&gt;show();</div>
<div class="line">    #endif</div>
<div class="line">#endif</div>
</div><!-- fragment --><ul>
<li>Use <a class="el" href="classCFrmUpdater.html#a8319ab1f7d80b1d4641f189e9e1f808d" title="Update XML file used only to generate programs.">CFrmUpdater::GenerateUpdateXml()</a> to generate update xml file, use &ndash;help look up parameter <pre class="fragment">./TasksApp --help
Usage: ./TasksApp [options]

Options:
    -h, --help                       Displays this help.
    -v, --version                    Displays version information.
    -f, --file &lt;xml file name&gt;       xml file name
    --pv &lt;Package version&gt;           Package version
    -t, --time &lt;Time&gt;                Time
    -i, --info &lt;Information&gt;         Information
    -s, --system &lt;Operating system&gt;  Operating system
    -p, --platform &lt;Platform&gt;        Platform
    -a, --arch &lt;Architecture&gt;        Architecture
    -c, --md5 &lt;MD5 checksum&gt;         MD5 checksum
    -u, --url &lt;Download url&gt;         Package download url
    --home &lt;Project home url&gt;        Project home url
    -m, --min &lt;Min update version&gt;   Min update version
</pre></li>
<li>Add Update/update.xml in project source root directory, then add the url to CFrmUpdater::DownloadFile. <pre class="fragment">&lt;?xml version="1.0" encoding="UTF-8"?&gt;
    &lt;REDIRECT&gt;
        &lt;VERSION&gt;v2.3.4&lt;/VERSION&gt;
        &lt;WINDOWS&gt;
            &lt;URL&gt;url&lt;/URL&gt;
        &lt;/WINDOWS&gt;
        &lt;LINUX&gt;
            &lt;URL&gt;url&lt;/URL&gt;
        &lt;/LINUX&gt;
        &lt;LINUX_APPIMAGE&gt;
            &lt;URL&gt;url&lt;/URL&gt;
        &lt;/LINUX_APPIMAGE&gt;
        &lt;ANDROID&gt;
            &lt;URL&gt;url&lt;/URL&gt;
        &lt;/ANDROID&gt;
&lt;/REDIRECT&gt;
</pre></li>
<li>See: <a href="https://github.com/KangLin/SerialPortAssistant">https://github.com/KangLin/SerialPortAssistant</a></li>
</ul>
<div class="image">
<img src="updater_en.png" alt=""/>
<div class="caption">
Updater</div></div>
    <h4><a class="anchor" id="autotoc_md80"></a>
Execute the program with administrator privileges</h4>
<p><a href="Src/AdminAuthoriser/adminauthoriser.h">adminauthoriser.h</a></p>
<ul>
<li>Internal implementation <pre class="fragment">QString szCmd = "mkdir";
QStringList paras;
paras &lt;&lt; "-p" &lt;&lt; "/opt/RabbitCommonAdminAuthoriseTest";
qDebug() &lt;&lt; "RabbitCommon::AdminAuthoriser::Instance()-&gt;execute(szCmd, paras):"
         &lt;&lt; RabbitCommon::AdminAuthoriser::Instance()-&gt;execute(szCmd, paras);
</pre></li>
<li>Public interface: <pre class="fragment">RabbitCommon::CTools::ExecuteWithAdministratorPrivilege("regedit", QStringList());
</pre> </li>
</ul>
<h4><a class="anchor" id="autotoc_md81"></a>
The program starts automatically</h4>
<p><a href="Src/RabbitCommonTools.h">The program starts automatically</a> </p><pre class="fragment">  static int InstallStartRun(const QString &amp;szName = QString(),
                           const QString &amp;szPath = QString(),
                           bool bAllUser = false);
  static int RemoveStartRun(const QString &amp;szName = QString(),
                       bool bAllUser = false);
  static bool IsStartRun(const QString &amp;szName = QString(),
                       bool bAllUser = false);
</pre> <h4><a class="anchor" id="autotoc_md82"></a>
Get system information</h4>
<ul>
<li>Get current login user name: <pre class="fragment">RabbitCommon::CTools::GetCurrentUser();
</pre></li>
<li>Get host name: <pre class="fragment">RabbitCommon::CTools::GetHostName();
</pre> </li>
</ul>
<h3><a class="anchor" id="autotoc_md83"></a>
Other projects using this project</h3>
<ul>
<li><a href="https://github.com/KangLin/RabbitRemoteControl">Rabbit remote control</a></li>
<li><a href="https://github.com/KangLin/RabbitCommon">Rabbit IM</a></li>
<li><a href="https://github.com/KangLin/Calendar">Calendar</a></li>
<li><a href="https://github.com/KangLin/LunarCalendar">LunarCalendar</a></li>
<li><a href="https://github.com/KangLin/SerialPortAssistant">SerialPortAssistant</a></li>
<li><a href="https://github.com/KangLin/FaceRecognizer">FaceRecognizer</a></li>
<li><a href="https://github.com/KangLin/TransformCoordinate">TransformCoordinate</a></li>
<li><a href="https://github.com/KangLin/ChineseChessControl">Chinese chess control</a></li>
</ul>
<h3><a class="anchor" id="autotoc_md84"></a>
Donation</h3>
<div class="image">
<img src="Contribute_en.png" alt=""/>
<div class="caption">
Donation</div></div>
    <h3><a class="anchor" id="autotoc_md85"></a>
License</h3>
<p><a class="el" href="md__2home_2runner_2work_2RabbitCommon_2RabbitCommon_2License.html">License.md</a> </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- HTML footer for doxygen 1.8.16-->
<!-- start footer part -->
<hr class="footer"/><address class="footer">
<a href="mailto:kl222@126.com" >作者：康林 (kl222@126.com) </a>
<p/>
<a href="https://github.com/KangLin/RabbitCommon">版权所有(c) 康林工作室 保留所有权力</a>
</address>
</body>
</html>
